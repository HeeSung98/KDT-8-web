<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Sign up</title>
  </head>
  <body>
    <h1>회원가입 하기</h1>

    <fieldset style="width: 20vw">
      <legend>회원가입</legend>
      <input
        type="text"
        value=""
        placeholder="ID"
        id="id"
        style="width: 19vw"
      />
      <br /><br />
      <input
        type="text"
        value=""
        placeholder="이름"
        id="name"
        style="width: 19vw"
      />
      <br /><br />
      <input
        type="password"
        value=""
        placeholder="비밀번호"
        id="pw"
        style="width: 19vw"
      />
      <br /><br />
      <input
        type="password"
        value=""
        placeholder="비밀번호 확인"
        id="pwCheck"
        style="width: 19vw"
      /><br />
      <br />
      <div
        style="
          visibility: visible;
          display: flex;
          justify-content: center;
          text-align: ceenter;
        "
      >
        <button onclick="signup()" id="signup">완료</button>
      </div>
      <br />
    </fieldset>
  </body>
  <script>
    function signup() {
      console.log('singup()')

      if (
        document.querySelector('#pw').value !=
        document.querySelector('#pwCheck').value
      ) {
        alert('비밀번호가 다릅니다.')
        document.querySelector('#pwCheck').value = ''
        return
      }

      const data = {
        id: document.querySelector('#id').value,
        name: document.querySelector('#name').value,
        pw: document.querySelector('#pw').value,
      }
      console.log(data)

      axios({
        method: 'POST',
        url: '/signup',
        data,
      })
        .then((res) => {
          console.log('res: ', res)
          location.href = './'
        })
        .catch((err) => {
          console.log('err: ', err)
          alert('중복된 아이디입니다.')
        })
    }
  </script>
</html>
